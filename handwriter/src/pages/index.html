<!doctype html>
<html lang="ro">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Handwriter — web</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="../styles/style.css" />
</head>
<body>
  <header>
    <h1>Handwriter (Web)</h1>
    <p>Calibrare mai ușoară, scan cu decupare, export sincer și experiență PWA.</p>
  </header>
  <main>
    <section id="welcome" class="card">
      <h2>Start</h2>
      <p>Folosește butonul <b>Începe calibrare</b> pentru setul rapid (A–Z, a–z, 0–9, spațiu). După calibrare mergi la <b>Scan</b> ca să fotografiezi notițele, apoi verifică textul și exportă în format text/markdown.</p>
      <div class="controls">
        <button id="btn-start-calib">Începe calibrare</button>
        <button id="btn-scan">Scan</button>
        <button id="btn-view-samples">Vezi mostre</button>
        <button id="btn-clear-samples">Șterge toate mostrele</button>
      </div>
      <div id="install-hint" class="callout hidden">
        <p><b>Instalează</b> aplicația pe ecranul de pornire pentru acces rapid.</p>
        <button id="btn-install">Instalează</button>
      </div>
    </section>

    <section id="calib" class="card hidden">
      <h2>Calibrare</h2>
      <p>Scrie pe hârtie caracterul afișat și apasă <b>Fotografiază</b>. Poți sări peste simbolurile pe care nu le folosești. Setul poate fi extins automat când apar caractere noi în scan.</p>
      <div id="calib-info"></div>
      <div id="calib-progress" class="progress">
        <div id="calib-progress-bar"></div>
      </div>
      <div id="calib-progress-text" class="progress-text"></div>
      <div class="controls">
        <button id="btn-use-quick" class="secondary">Set rapid A–Z + cifre</button>
        <button id="btn-use-full" class="secondary">Set complet tastatură</button>
        <button id="btn-next-untrained">Următorul necalibrat</button>
      </div>
      <div class="video-frame">
        <div class="guide-box"></div>
        <video id="video" autoplay playsinline></video>
      </div>
      <canvas id="canvas" class="hidden"></canvas>
      <div class="controls">
        <button id="btn-capture">Fotografiază</button>
        <button id="btn-next-char">Caracter următor</button>
        <button id="btn-skip-char" class="secondary">Nu folosesc simbolul</button>
        <button id="btn-done-calib">Gata</button>
      </div>
      <div id="sample-feedback" class="callout hidden">
        <div class="thumb-wrapper"><img id="sample-thumb" alt="Previzualizare mostru" /></div>
        <div>
          <div id="sample-quality"></div>
          <div id="sample-warnings" class="warn"></div>
        </div>
      </div>
      <div id="calib-samples"></div>
    </section>

    <section id="scan" class="card hidden">
      <h2>Scan</h2>
      <p>Foto notiță — segmentează liniile și caracterele. Poți decupa, roti și reface captura înainte de procesare.</p>
      <div id="scan-live" class="video-frame">
        <div class="guide-box"></div>
        <video id="video-scan" autoplay playsinline></video>
      </div>
      <canvas id="canvas-scan" class="hidden"></canvas>
      <canvas id="scan-preview" class="hidden"></canvas>
      <div class="controls">
        <button id="btn-capture-scan">Fotografiază notița</button>
        <button id="btn-retake" class="secondary hidden">Refă captura</button>
      </div>
      <div id="scan-edit" class="hidden">
        <p>Trage pe imagine pentru a decupa. Folosește rotirile pentru a alinia foaia.</p>
        <div class="controls">
          <button id="btn-rotate-left" class="secondary">Rotire -90°</button>
          <button id="btn-rotate-right" class="secondary">Rotire +90°</button>
          <button id="btn-process-scan">Procesează text</button>
        </div>
        <div class="controls">
          <button id="btn-cancel-edit" class="secondary">Renunță</button>
        </div>
      </div>
      <div id="scan-result" class="result"></div>
    </section>

    <section id="export" class="card hidden">
      <h2>Rezultat & Export</h2>
      <textarea id="final-text" rows="10"></textarea>
      <div class="controls">
        <button id="btn-export-txt">Exportă .txt</button>
        <button id="btn-export-md" class="secondary">Exportă .md</button>
        <button id="btn-copy">Copiază în clipboard</button>
      </div>
    </section>

    <section id="samples-list" class="card hidden">
      <h2>Mostre salvate</h2>
      <div id="samples-grid"></div>
      <div class="controls"><button id="btn-back">Înapoi</button></div>
    </section>
  </main>
  <footer>Handwriter — versiune web • Datele rămân în browser (LocalStorage)</footer>

<script type="module" src="../main/app.js"></script>
</body>
</html>
